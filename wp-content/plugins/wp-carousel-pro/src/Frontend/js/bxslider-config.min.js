!(function ($) {
  "use strict";
  jQuery("body")
    .find(".wpcp-carousel-section.wpcp-ticker")
    .each(function () {
      var carousel_id = $(this).attr("id"),
        carousel_offset = $(this).offset().left,
        _this = $(this);
      if ("" !== carousel_id) {
        var ticker_items = $("#" + carousel_id).find(".wpcp-ticker").length,
          speed =
            (_this.data("slide-width") * ticker_items * _this.data("speed")) /
            1e3,
          carousel_width =
            _this.data("slide-width") * ticker_items +
            _this.data("slide-margin") * ticker_items,
          width = $(window).width(),
          minSlides = _this.data("min-slides"),
          maxSlides = _this.data("max-slides");
        if (
          ("vertical" == _this.data("mode") &&
            ((minSlides = maxSlides),
            width < 480 &&
              ((minSlides = _this.data("min-slides")),
              (maxSlides = _this.data("min-slides")))),
          jQuery("#" + carousel_id).bxSlider({
            ticker: !0,
            tickerHover: _this.data("hover-pause"),
            speed: speed,
            easing: null,
            slideWidth: _this.data("variable-width")
              ? "auto"
              : _this.data("slide-width"),
            slideMargin: _this.data("slide-margin"),
            minSlides: minSlides,
            adaptiveHeight: !1,
            maxSlides: maxSlides,
            moveSlides: _this.data("minslide"),
            shrinkItems: !1,
            auto: !1,
            autoDirection: _this.data("direction"),
            mode: _this.data("mode"),
            wrapperClass: "sp-wpcp-wrapper",
          }),
          _this.data("ticker-drag") && "vertical" !== _this.data("mode"))
        ) {
          let left = 0,
            pageX = 0,
            isDrag = !1;
          jQuery("#" + carousel_id).on("mousedown touchstart", function (e) {
            (left = $(this).position().left),
              (pageX = e.originalEvent.clientX - carousel_offset),
              (isDrag = !0);
          }),
            jQuery("#" + carousel_id).on("mousemove touchmove", function (e) {
              if ((e.preventDefault(), !isDrag)) return;
              let clientX = e.originalEvent.clientX - carousel_offset,
                left_value = Math.abs(left) - (clientX - pageX);
              (left_value = left_value > carousel_width ? 0 : left_value),
                $(this).css(
                  "transform",
                  `translate3d(-${left_value}px, 0px, 0px)`
                ),
                $(this).addClass("wpcp-pause-ticker-lightbox");
            }),
            jQuery("#" + carousel_id).on(
              "mouseup mouseleave touchend touchcancel",
              function (e) {
                isDrag &&
                  ((isDrag = !1),
                  $(this).css(
                    "transform",
                    `translate3d(-${
                      "prev" === _this.data("direction") &&
                      Math.abs($(this).position().left) < 10
                        ? carousel_width
                        : $(this).position().left
                    }px, 0px, 0px)`
                  ),
                  $(this).removeClass("wpcp-pause-ticker-lightbox"));
              }
            );
        }
      }
      "vertical" == _this.data("mode") &&
        jQuery("#" + carousel_id)
          .parents(".sp-wpcp-wrapper")
          .css("margin", "auto"),
        $("#" + carousel_id + ".wpcp_img_protection img").on(
          "contextmenu",
          function (e) {
            return !1;
          }
        ),
        jQuery("#" + carousel_id + " .wpcp-single-item img").removeAttr(
          "loading"
        );
    });
})(jQuery);
